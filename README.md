# yandex-arch-sprint-6

## Task1
### ФТ:
Компания хочет сделать упор на развитие в регионах РФ. Планируется значительный рост количества пользователей и запросов. Нужно обеспечить бесперебойную работу сервиса 24/7, при этом сервис должен обслуживать клиентов из всех часовых поясов.
Дополнительно к этому нужно обеспечить одинаковое время загрузки страниц для пользователей из разных регионов. Оно не должно зависеть от географического местоположения пользователя.

### НФТ:
- RTO — 45 мин.
- RPO — 15 мин.
- Согласно требованиям бизнеса, доступность приложения должна быть равна 99,9%
- Общий объём данных, которые хранятся в системе, равен 50 GB

### Рекомендации
- Вертикальное масштабирование не подойдет для указанных ФТ/НФТ, так как необходимо обеспечить высокую доступность из разных регионов, необходимо применить горизонтальное масштабирование.
- Для указанных в НФТ показателей доступности необходимо развернуть дополнительный(ые) ЦОД с применением фейловер-стратегии Active-Active, чтобы все развернутые приложения в кластерах Kubernetes были постоянно активны и способны обрабатывать запросы, что в свою очередь сведет потенциальное время простоя к нулю.
- Применить георезервирование с независимыми кластерами Kubernetes. То есть "Зона доступности 1" и "Зона доступности 2" должны быть развернуты в разных ЦОД в разных географических локациях для повышения отказоустойчивости.
- Нагрузку между кластерами Kubernetes предлагается балансировать с помощью внешнего GLSB, который будет опрашивать через healthcheck состояние кластеров и принимать решение о переводе всего трафика на живой кластер в случае отказа одного из них.
- Для БД PostgreSQL предлагается использовать отказоустойчивый кластер Patroni также с геораспределенным расположением узлов в разных зонах доступности. В такой конфигурации Patroni будет на основе данных etcd выбирать основной узел для работы приложения, а в остальные узлы будет происходить потоковая репликация, что позволит быстро переключиться на другой узел в случае выхода из строя основного.
- Также предлагается настроить резервное копирование БД PostgrteSQL на внешний сервер pgBackRest.
- Ввиду планов компании на значительное расширение в регионах РФ, можно в будущем рассмотреть применение шардирования данных в БД - например, на основе геопринадлежности этих данных. Но для текущего объема в 50 GB реализация шардирования выглядит избыточной.
